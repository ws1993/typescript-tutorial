<html data-reactroot=""><head><script async="" src="https://www.google-analytics.com/analytics.js"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-45256157-14');</script><title>数组的类型 · TypeScript 入门教程</title><meta charSet="utf-8"/><link rel="shortcut icon" type="image/png" href="//xcatliu.github.io/favicon.ico"/><link rel="stylesheet" href="/assets/prism.css"/><link rel="stylesheet" href="/assets/index.css"/></head><body><header><h1><a href="/">TypeScript 入门教程</a></h1><nav><ul><li><a href="https://github.com/xcatliu/typescript-tutorial">GitHub</a></li><li><a href="https://github.com/xcatliu/buy-me-a-coffee">赞助作者</a></li><li><a href="https://github.com/xcatliu/pagic">本网站使用 Pagic 构建</a></li></ul></nav></header><aside><ul><li><a href="/index.html" class="">TypeScript 入门教程</a></li><li><a href="/introduction/index.html" class="">简介</a><ul><li><a href="/introduction/what-is-typescript.html" class="">什么是 TypeScript</a></li><li><a href="/introduction/get-typescript.html" class="">安装 TypeScript</a></li><li><a href="/introduction/hello-typescript.html" class="">Hello TypeScript</a></li></ul></li><li><a href="/basics/index.html" class="">基础</a><ul><li><a href="/basics/primitive-data-types.html" class="">原始数据类型</a></li><li><a href="/basics/any.html" class="">任意值</a></li><li><a href="/basics/type-inference.html" class="">类型推论</a></li><li><a href="/basics/union-types.html" class="">联合类型</a></li><li><a href="/basics/type-of-object-interfaces.html" class="">对象的类型——接口</a></li><li><a href="/basics/type-of-array.html" class="active">数组的类型</a></li><li><a href="/basics/type-of-function.html" class="">函数的类型</a></li><li><a href="/basics/type-assertion.html" class="">类型断言</a></li><li><a href="/basics/declaration-files.html" class="">声明文件</a></li><li><a href="/basics/built-in-objects.html" class="">内置对象</a></li></ul></li><li><a href="/advanced/index.html" class="">进阶</a><ul><li><a href="/advanced/type-aliases.html" class="">类型别名</a></li><li><a href="/advanced/string-literal-types.html" class="">字符串字面量类型</a></li><li><a href="/advanced/tuple.html" class="">元组</a></li><li><a href="/advanced/enum.html" class="">枚举</a></li><li><a href="/advanced/class.html" class="">类</a></li><li><a href="/advanced/class-and-interfaces.html" class="">类与接口</a></li><li><a href="/advanced/generics.html" class="">泛型</a></li><li><a href="/advanced/declaration-merging.html" class="">声明合并</a></li><li><a href="/advanced/further-reading.html" class="">扩展阅读</a></li></ul></li><li><a href="/engineering/index.html" class="">工程</a><ul><li><a href="/engineering/lint.html" class="">代码检查</a></li><li><a href="/engineering/compiler-options.html" class="">编译选项</a></li></ul></li><li><a href="/thanks/index.html" class="">感谢</a></li></ul></aside><section class="main"><article><h1 id="%E6%95%B0%E7%BB%84%E7%9A%84%E7%B1%BB%E5%9E%8B">数组的类型 <a class="header-anchor" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E7%B1%BB%E5%9E%8B">§</a></h1>
<p>在 TypeScript 中，数组类型有多种定义方式，比较灵活。</p>
<h2 id="%E3%80%8C%E7%B1%BB%E5%9E%8B-%2B-%E6%96%B9%E6%8B%AC%E5%8F%B7%E3%80%8D%E8%A1%A8%E7%A4%BA%E6%B3%95">「类型 + 方括号」表示法 <a class="header-anchor" href="#%E3%80%8C%E7%B1%BB%E5%9E%8B-%2B-%E6%96%B9%E6%8B%AC%E5%8F%B7%E3%80%8D%E8%A1%A8%E7%A4%BA%E6%B3%95">§</a></h2>
<p>最简单的方法是使用「类型 + 方括号」来表示数组：</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> fibonacci<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>数组的项中<strong>不允许</strong>出现其他的类型：</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> fibonacci<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Type 'string' is not assignable to type 'number'.</span>
</code></pre>
<p>数组的一些方法的参数也会根据数组在定义时约定的类型进行限制：</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> fibonacci<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
fibonacci<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token string">'8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Argument of type '"8"' is not assignable to parameter of type 'number'.</span>
</code></pre>
<p>上例中，<code>push</code> 方法只允许传入 <code>number</code> 类型的参数，但是却传了一个 <code>&quot;8&quot;</code> 类型的参数，所以报错了。这里 <code>&quot;8&quot;</code> 是一个字符串字面量类型，会在后续章节中详细介绍。</p>
<h2 id="%E6%95%B0%E7%BB%84%E6%B3%9B%E5%9E%8B">数组泛型 <a class="header-anchor" href="#%E6%95%B0%E7%BB%84%E6%B3%9B%E5%9E%8B">§</a></h2>
<p>我们也可以使用数组泛型（Array Generic） <code>Array&lt;elemType&gt;</code> 来表示数组：</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> fibonacci<span class="token operator">:</span> <span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>关于泛型，可以参考<a href="../advanced/generics.html">泛型</a>一章。</p>
<h2 id="%E7%94%A8%E6%8E%A5%E5%8F%A3%E8%A1%A8%E7%A4%BA%E6%95%B0%E7%BB%84">用接口表示数组 <a class="header-anchor" href="#%E7%94%A8%E6%8E%A5%E5%8F%A3%E8%A1%A8%E7%A4%BA%E6%95%B0%E7%BB%84">§</a></h2>
<p>接口也可以用来描述数组：</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">NumberArray</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> fibonacci<span class="token operator">:</span> <span class="token maybe-class-name">NumberArray</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p><code>NumberArray</code> 表示：只要索引的类型是数字时，那么值的类型必须是数字。</p>
<p>虽然接口也可以用来描述数组，但是我们一般不会这么做，因为这种方式比前两种方式复杂多了。</p>
<p>不过有一种情况例外，那就是它常用来表示类数组。</p>
<h2 id="%E7%B1%BB%E6%95%B0%E7%BB%84">类数组 <a class="header-anchor" href="#%E7%B1%BB%E6%95%B0%E7%BB%84">§</a></h2>
<p>类数组（Array-like Object）不是数组类型，比如 <code>arguments</code>：</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> args<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Type 'IArguments' is missing the following properties from type 'number[]': pop, push, concat, join, and 24 more.</span>
</code></pre>
<p>上例中，<code>arguments</code> 实际上是一个类数组，不能用普通的数组的方式来描述，而应该用接口：</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> args<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        callee<span class="token operator">:</span> <span class="token known-class-name class-name">Function</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>在这个例子中，我们除了约束当索引的类型是数字时，值的类型必须是数字之外，也约束了它还有 <code>length</code> 和 <code>callee</code> 两个属性。</p>
<p>事实上常用的类数组都有自己的接口定义，如 <code>IArguments</code>, <code>NodeList</code>, <code>HTMLCollection</code> 等：</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> args<span class="token operator">:</span> <span class="token maybe-class-name">IArguments</span> <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>其中 <code>IArguments</code> 是 TypeScript 中定义好了的类型，它实际上就是：</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">interface</span> <span class="token class-name"><span class="token maybe-class-name">IArguments</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
    length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    callee<span class="token operator">:</span> <span class="token known-class-name class-name">Function</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>关于内置对象，可以参考<a href="./built-in-objects.html">内置对象</a>一章。</p>
<h2 id="any-%E5%9C%A8%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8">any 在数组中的应用 <a class="header-anchor" href="#any-%E5%9C%A8%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8">§</a></h2>
<p>一个比较常见的做法是，用 <code>any</code> 表示数组中允许出现任意类型：</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> list<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'xcatliu'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> website<span class="token operator">:</span> <span class="token string">'<a class="token url-link" href="http://xcatliu.com">http://xcatliu.com</a>'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="%E5%8F%82%E8%80%83">参考 <a class="header-anchor" href="#%E5%8F%82%E8%80%83">§</a></h2>
<ul>
<li><a href="http://www.typescriptlang.org/docs/handbook/basic-types.html#array">Basic Types # Array</a>（<a href="https://zhongsp.gitbooks.io/typescript-handbook/content/doc/handbook/Basic%20Types.html#%E6%95%B0%E7%BB%84">中文版</a>）</li>
<li><a href="http://www.typescriptlang.org/docs/handbook/interfaces.html#indexable-types">Interfaces # Indexable Types</a>（<a href="https://zhongsp.gitbooks.io/typescript-handbook/content/doc/handbook/Interfaces.html#%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B">中文版</a>）</li>
</ul>
<hr>
<ul>
<li><a href="type-of-object-interfaces.html">上一章：对象的类型——接口</a></li>
<li><a href="type-of-function.html">下一章：函数的类型</a></li>
</ul>
</article></section><script type="module" src="/main.js"></script></body></html>